# 事件处理

## react event 与 html event 区别

**1. react 事件命名采用小驼峰（camelCase），html 采用纯小写**

下面是 jsx 向按钮绑定一个 click 事件的案例

```
// jsx
<button onClick={handleClick}>click</button>

// html
<button onclick="handleClick()">click</button>
```

**2. 阻止默认行为**
html 中可以通过 `return false`; 阻止默认行为；而 react 中只能通过 `e.preventDefault()`来阻止默认行为。

**3. 添加事件监听方式**
在传统的 JavaScript 中，一般使用 addEventListener 的方式添加事件监听器；而 react 一般不需要这样，我们只需要在渲染元素时添加监听器即可。

## JSX 中的 this

在编写类组件时，事件处理函数通常是类的一个方法。这时候方法内部的 this 指向需要注意。

**1. 绑定 this 指向：**

```
const app = document.querySelector('#app');

class Demo extends React.Component {
  constructor(props) {
    super(props);
    this.state = { msg: 'hello world' };
    this.handleClick = this.handleClick.bind(this); // bind this
  }

  handleClick() {
    console.log(this.state.msg);
  }

  render() {
    return <button onClick={this.handleClick}>click</button>;
  }
}

ReactDOM.render(<Demo />, app);
```

在 JavaScript 中，class 的方法默认不会绑定 this。如果没有 bind this，那么点击按钮后将会报错：`TypeError: this is undefined`。

> 需要注意的是，如果将 render 函数内部的 JSX 修改为： `return <button onClick={this.handleClick()}>click</button>;` 虽然可以正常调用函数，但是在渲染结束后将直接执行，并且无法再次触发。

**2. public class fields:**
我们都知道箭头函数自带 bind this 功能，所以这里将 handleClick 指向了一个箭头函数，实现了 this 的正确指向。

```
handleClick = () => {
  console.log(this.state.msg);
};
```

**3. 箭头函数**

**在事件处理函数是由 props 传递而来时，不推荐使用此方式**

使用箭头函数的话，不用在 constructor() 中 bind(this)，也不用写 public class fields。只需要在绑定 event 时修改为箭头函数即可：

```
render() {
  return <button onClick={(e) => this.handleClick(e)}>click</button>;
}
```

## 向事件处理程序传参

> 见： _05-向事件处理程序传参.html_

```
<button onClick={(e) => this.deleteRow(id, e)}>Delete Row</button>
<button onClick={this.deleteRow.bind(this, id)}>Delete Row</button>
```
