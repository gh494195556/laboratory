# 02-前端与协议

## HTTP 协议

HTTP（HyperText Transport Protocol 超文本传输协议）协议是 WWW 服务器和请求代理（浏览器等）之间通过应答请求模式传输超文本内容（HTML 文件、JS 文件等）的一种协议。

通常一个完整的 HTTP 报头由头部、空行、正文三部分组成。空行用于区分报文头部和报文正文，由一个回车符和一个换行符组成。

**HTTP 请求报文**：
**请求头**通常由请求类型、请求 URI、协议版本和扩展内容组成；请求头包含的请求头域信息：Accept、Cookie、Cache-Control、Host 等。
**请求正文**可以携带浏览器端请求的内容，比如 POST、PUT 请求的表单内容。

**HTTP 响应报文**：
**响应头**由状态码、状态描述、协议版本、扩展内容组成。响应头域信息：Date、Content-Type、Cachel-Control、Expires 等。

HTTP 目前有 4 个版本，分别是：HTTP 0.9、HTTP 1.0、HTTP 1.1、HTTP 2。目前最为广泛的是 HTTP 1.1。

### HTTP 1.1

相对与 HTTP 1.0，HTTP 1.1 增加了协议扩展切换、缓存、部分文件传输优化、长连接、消息传递、host 头域、错误提示等重要的增强特性。

**长连接**
HTTP 1.1 的长连接机制是通过请求头中的 keep-alive 头域信息来控制的。HTTP 1.0 默认请求的服务器返回是没有 keep-alive 的，但是在 HTTP 1.1 协议中，默认都会包含 keep-alive。

**协议扩展切换**
HTTP 1.1 协议支持在请求头部域信息中包含 Upgrade 头，并让客户端通过头部标识令服务器知道他能支持其他备用的通信协议的一种机制，服务器根据客户端请求的其他协议进行切换，切换后使用备用协议与客户端进行通信。例如 WebSocket 协议就是典型的应用。

**缓存控制**
HTTP 1.0 通过对 Expires 头部控制，根据绝对时间来实现刷新缓存内容；HTTP 1.1 增加了 Cache-Control 头域，支持 max-age 用来表示相对过期时间，令为请求服务器时也可以根据 Etag 和 Last-Modified 来判断是否从浏览器端缓存中加载文件，此时缓存的控制和判断将决定服务器的响应报文中头部内容的状态码是 200 还是 304。

**部分内容传输优化**
